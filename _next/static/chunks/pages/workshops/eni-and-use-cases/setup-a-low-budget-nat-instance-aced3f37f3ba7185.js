(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[924],{8296:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance",function(){return t(8236)}])},8236:function(e,n,t){"use strict";t.r(n),t.d(n,{__toc:function(){return l},default:function(){return h}});var s=t(5893),a=t(2673),r=t(7913),i=t(8426);t(9128);var o=t(2643),c={src:"/_next/static/media/nat.f611b5c9.png",height:364,width:949,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAR0lEQVR42g3KQQrAIAxEUe9/zGo3WguKNZkxgWb3+bxEstYG8hwD+O0NwN2TKnK511qtPVcuscaYIpJIRqnqmLP3F2BQM/sBFudE2J0abu0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:3},d={src:"/_next/static/media/nat-instance.0d668196.png",height:1099,width:1431,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAdklEQVR42h2MUQ7DIAxDuf8NJ20fVKVaq45CGREJCcyaP2zL0rNj5vEXEYkIipnB3bLt1JraZOmqpjoQkEMccUvlbHfJOV71w50BOXDvMyzhgYv0vXz0xITR2bBwJL/uc86Y6flaSdRA9K7UuFTCZxO5K8FV7Qe4jYqANMcPcgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6};let l=[{depth:2,value:"Network Address Translation (NAT)",id:"network-address-translation-nat"},{depth:2,value:"Lab Overview",id:"lab-overview"},{depth:2,value:"Prerequisites",id:"prerequisites"}];function _createMdxContent(e){let n=Object.assign({h1:"h1",h2:"h2",p:"p",img:"img",strong:"strong",a:"a",ul:"ul",li:"li"},(0,o.a)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{children:"Setup a Low-budget NAT Instance"}),"\n",(0,s.jsx)(n.h2,{id:"network-address-translation-nat",children:"Network Address Translation (NAT)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"NAT",placeholder:"blur",src:c}),"\n",(0,s.jsx)(n.strong,{children:"Image"}),": ",(0,s.jsx)(n.a,{href:"https://avinetworks.com/glossary/network-address-translation/",children:"avinetworks"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Network Address Translation (NAT)"})," is a method that allows multiple devices on a local network to share a single public IP (IPv4) address to access the internet.\nThe reason for using ",(0,s.jsx)(n.strong,{children:"NAT"})," is to reduce the number of public IP addresses required for a network.\nAs you know that the number of IPv4 addresses is limited (",(0,s.jsx)(n.strong,{children:"~4.3 billion),"})," and the demand for public IP addresses is increasing rapidly.\nAdditionally, ",(0,s.jsx)(n.strong,{children:"NAT"})," provides a layer of security by hiding the internal IP addresses from the external network."]}),"\n",(0,s.jsxs)(n.p,{children:["Initially, ",(0,s.jsx)(n.strong,{children:"NAT"})," was used to extend the life of IPv4 addresses until IPv6 was widely adopted.\nHowever, IPv4 addresses have been used for more than 30 years, and the transition to IPv6 is still slow.\nConsequently, ",(0,s.jsx)(n.strong,{children:"NAT"})," is still widely used in many networks, including home networks, small businesses, and cloud environments."]}),"\n",(0,s.jsxs)(n.p,{children:["On AWS, the recommended method for setting up ",(0,s.jsx)(n.strong,{children:"NAT"})," is to use a ",(0,s.jsx)(n.a,{href:"https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html",children:"NAT Gateway"}),", as it is a managed service that scales automatically and requires no maintenance.\nHowever, the ",(0,s.jsx)(n.strong,{children:"NAT Gateway"})," is not cheap, if not expensive for small workloads such as personal projects or development environments.\nAt the time of writing, the ",(0,s.jsx)(n.strong,{children:"NAT Gateway"})," costs ",(0,s.jsx)(n.strong,{children:"$0.045"})," per hour plus ",(0,s.jsx)(n.strong,{children:"$0.045"})," per GB data processed in the cheapest region ",(0,s.jsx)(n.strong,{children:"(N. Virginia)"}),".\nIt means that if you run a ",(0,s.jsx)(n.strong,{children:"NAT Gateway"})," and not use it, you will still be charged at least ",(0,s.jsx)(n.strong,{children:"$32.4"})," per month."]}),"\n",(0,s.jsxs)(n.p,{children:["Therefore, setting up an ",(0,s.jsx)(n.strong,{children:"NAT instance"})," is one of the cost-effective alternatives to the ",(0,s.jsx)(n.strong,{children:"NAT Gateway"})," in development and testing environments."]}),"\n",(0,s.jsx)(n.h2,{id:"lab-overview",children:"Lab Overview"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"NAT Instance",placeholder:"blur",src:d})}),"\n",(0,s.jsxs)(n.p,{children:["In this lab, we will set up ",(0,s.jsx)(n.strong,{children:"NAT"})," with an ",(0,s.jsx)(n.strong,{children:"EC2 instance"})," (also known as ",(0,s.jsx)(n.strong,{children:"NAT instance"}),").\nThe ",(0,s.jsx)(n.strong,{children:"NAT instance"})," will allow the instances in the ",(0,s.jsx)(n.strong,{children:"private subnets"})," to access the internet through it.\nAn ",(0,s.jsx)(n.strong,{children:"Elastic Network Interface (ENI)"})," will be created and attached as the secondary network interface to the ",(0,s.jsx)(n.strong,{children:"NAT instance"}),", it is responsible for receiving the traffic which comes from the ",(0,s.jsx)(n.strong,{children:"private instances"})," and forwarding it to the internet.\nWe will also put the ",(0,s.jsx)(n.strong,{children:"NAT instance"})," in an ",(0,s.jsx)(n.strong,{children:"Auto-Scaling Group"})," to ensure that the ",(0,s.jsx)(n.strong,{children:"NAT instance"})," would be automatically recovered if it is terminated (intentionally or unintentionally)."]}),"\n",(0,s.jsxs)(n.p,{children:["The cost of running a ",(0,s.jsx)(n.strong,{children:"NAT instance"})," in this setup is low.\nIf you run the ",(0,s.jsx)(n.strong,{children:"t3.micro"})," On-Demand instance in the ",(0,s.jsx)(n.strong,{children:"us-east-1"})," region, the cost will be around ",(0,s.jsx)(n.strong,{children:"~$7.5"})," if you run it for a month. It could be less if you use newer instance type generations like ",(0,s.jsx)(n.strong,{children:"t4g.micro"}),".\nThe ",(0,s.jsx)(n.strong,{children:"ENI"})," is free, and you are not using any other AWS services that incur additional costs except for the data transfer out of the ",(0,s.jsx)(n.strong,{children:"NAT instance"})," to the internet.\nMore details can be found ",(0,s.jsx)(n.a,{href:"https://aws.amazon.com/ec2/pricing/on-demand/",children:"here"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"Before you begin this lab, you need the following:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["An ",(0,s.jsx)(n.strong,{children:"AWS account"})," with the necessary permissions to create and manage resources. If you don't have an AWS account, you can create one ",(0,s.jsx)(n.a,{href:"https://aws.amazon.com/",children:"here"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Basic knowledge of AWS relavant services like ",(0,s.jsx)(n.strong,{children:"EC2"})," and ",(0,s.jsx)(n.strong,{children:"VPC"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"How to use basic terminal commands."}),"\n"]})]})}let u={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.a)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance.mdx",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance",timestamp:1723654418e3,pageMap:[{kind:"Meta",data:{index:"Introduction",overview:"Overview","before-you-start":"Before You Start",workshops:"Workshops",contact:{title:"Contact â†—",type:"page",href:"https://www.linkedin.com/in/nghia-pham-70a0ab205/",newWindow:!0}}},{kind:"MdxPage",name:"before-you-start",route:"/before-you-start"},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"overview",route:"/overview"},{kind:"Folder",name:"workshops",route:"/workshops",children:[{kind:"Meta",data:{"eni-and-use-cases":"Elastic Network Interfaces (ENIs) and Use Cases"}},{kind:"Folder",name:"eni-and-use-cases",route:"/workshops/eni-and-use-cases",children:[{kind:"Meta",data:{"setup-a-low-budget-nat-instance":"Setup a Low-Budget NAT Instance","setup-a-low-budget-load-balancer":{display:"hidden",title:"Setup a Low Budget Load Balancer"}}},{kind:"MdxPage",name:"setup-a-low-budget-load-balancer",route:"/workshops/eni-and-use-cases/setup-a-low-budget-load-balancer"},{kind:"Folder",name:"setup-a-low-budget-nat-instance",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance",children:[{kind:"Meta",data:{"create-a-vpc":"1. Create a VPC","create-private-security-group":"2. Create the Security Group for the Private Instances","create-nat-security-group":"3. Create the Security Group for the NAT Instance","create-nat-role":"4. Create IAM Role for the NAT Instance","create-an-eni":"5. Create an ENI","update-private-route-tables":"6. Update Private Route Tables","create-nat-launch-template":"7. Create Launch Template for the NAT Instance","launch-nat-instance-with-asg":"8. Launch NAT Instance with Auto Scaling Group","test-nat-instance":"9. Test the NAT Instance","clean-up":"10. Clean Up",conclusion:"11. Conclusion"}},{kind:"MdxPage",name:"clean-up",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance/clean-up"},{kind:"MdxPage",name:"conclusion",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance/conclusion"},{kind:"MdxPage",name:"create-a-vpc",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance/create-a-vpc"},{kind:"MdxPage",name:"create-an-eni",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance/create-an-eni"},{kind:"MdxPage",name:"create-nat-launch-template",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance/create-nat-launch-template"},{kind:"MdxPage",name:"create-nat-role",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance/create-nat-role"},{kind:"MdxPage",name:"create-nat-security-group",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance/create-nat-security-group"},{kind:"MdxPage",name:"create-private-security-group",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance/create-private-security-group"},{kind:"MdxPage",name:"launch-nat-instance-with-asg",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance/launch-nat-instance-with-asg"},{kind:"MdxPage",name:"test-nat-instance",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance/test-nat-instance"},{kind:"MdxPage",name:"update-private-route-tables",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance/update-private-route-tables"}]},{kind:"MdxPage",name:"setup-a-low-budget-nat-instance",route:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance"}]},{kind:"MdxPage",name:"eni-and-use-cases",route:"/workshops/eni-and-use-cases"}]},{kind:"MdxPage",name:"workshops",route:"/workshops"}],flexsearch:{codeblocks:!0},title:"Setup a Low-budget NAT Instance",headings:l},pageNextRoute:"/workshops/eni-and-use-cases/setup-a-low-budget-nat-instance",nextraLayout:r.ZP,themeConfig:i.Z};var h=(0,a.j)(u)},8426:function(e,n,t){"use strict";var s=t(5893);t(7294);var a=t(5675),r=t.n(a);let i={head:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,s.jsx)("meta",{property:"og:title",content:"Benlab"}),(0,s.jsx)("meta",{property:"og:description",content:"Let's learn together"}),(0,s.jsx)("link",{rel:"icon",type:"image/png",href:"/images/logo.png"})]}),logo:(0,s.jsxs)("span",{children:[(0,s.jsx)(r(),{className:"rounded-full",src:"/images/logo.png",alt:"logo",height:50,width:50,style:{borderRadius:"50%",display:"inline-block"}})," ",(0,s.jsx)("b",{children:"BENLAB'S WORKSHOPS"})]}),project:{link:"https://github.com/phamtrongngh/aws-workshops"},docsRepositoryBase:"https://github.com/phamtrongngh/aws-workshops",footer:{text:""},editLink:{component:null},feedback:{content:"Give feedback"},useNextSeoProps:()=>({titleTemplate:"%s - Benlab's Workshops"})};n.Z=i},5789:function(){}},function(e){e.O(0,[774,543,888,179],function(){return e(e.s=8296)}),_N_E=e.O()}]);